korhonen.cc, *.korhonen.cc {
	tls {$CLOUDFLARE_EMAIL} {
		dns cloudflare {$CLOUDFLARE_API_TOKEN}
		resolvers 1.1.1.1
	}

	@homepage host korhonen.cc
  handle @homepage {
		root * /var/www/korhonen.cc
		file_server
	}

	@wkd host openpgpkey.korhonen.cc
	handle @wkd {
		root * /var/www/wkd
		file_server browse
	}

	@index host index.korhonen.cc
	handle @index {
		root * /var/www/index.korhonen.cc
		file_server browse
	}

	@home-assistant host home.korhonen.cc
	handle @home-assistant {
		reverse_proxy home-assistant:8123
	}

	@authentik host sso.korhonen.cc
	handle @authentik {
		reverse_proxy authentik:9000
	}

	@forgejo host git.korhonen.cc
	handle @forgejo {
		reverse_proxy forgejo:3000
	}

	@searx host search.korhonen.cc
	handle @searx {
		reverse_proxy searx:8080
	}

	@freshrss host rss.korhonen.cc
	handle @freshrss {
		reverse_proxy freshrss
	}

	@jellyfin host jellyfin.korhonen.cc
	handle @jellyfin {
		reverse_proxy jellyfin:8096
	}

	@misskey host social.korhonen.cc
	handle @misskey {
		reverse_proxy misskey:3000
	}

	@pihole host pihole.korhonen.cc
	handle @pihole {
		reverse_proxy pihole
	}

	@umami host umami.korhonen.cc
	handle @umami {
    reverse_proxy umami:3000
	}

	# Fallback for unhandled domains
	handle {
		redir https://korhonen.cc/404.html
	}
}
